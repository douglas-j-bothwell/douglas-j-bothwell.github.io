<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Troubleshooting with Patterns</title>
    <link rel="StyleSheet" href="css/atx_troubleshoot_with_patterns.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        function  WWHPDFLink()
        {
          return "atx_troubleshoot_with_patterns.pdf";
        }
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body style="margin-left: 2%; margin-right: 2%" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <div style="font-family: arial; float: right; height: 1px;"><a><img src="images/blank.gif" height="0" width="0" border="0" alt="skip to main content" /></a></div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">User Guide &gt; <a class="WebWorks_Breadcrumb_Link" href="atx_analyze_diagnose_apps_splash.html#221684">Analyzing and Diagnosing Applications</a> &gt; Troubleshooting with Patterns</div>
    <hr align="left" />
    <blockquote>
      <div class="hChapter"><a name="221684">Troubleshooting with Patterns</a></div>
      <div class="bodyIntro"><a name="228644">When troubleshooting application issues with AppTransaction&nbsp;Xpert, you may notice patterns when viewing application data in data exchange charts, tree&nbsp;views, statistic&nbsp;graphs, and simulation&nbsp;results. The patterns can be found in many sources, including repetitive delays, unexpected delays, packet sizes, TCP connections, and network throughput. Identifying patterns can help to provide clues to resolving application issues.</a></div>
      <div class="figAnchor"><a name="228656">&nbsp;</a></div>
      <table class="tableNarrow" style="text-align: left" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top; width: 191.83824pt">
            <div class="bodyIntro"><span style="color: #000000; font-size: 11.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="228647">Look for patterns. When you see a pattern, ask yourself:</a></span></div>
            <div class="listBullet_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="listBullet_inner" style="width: 14.4pt; white-space: nowrap;">•	</div>
                  </td>
                  <td width="100%">
                    <div class="listBullet_inner"><a name="228648">Why does the pattern exist?</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="listBulletLast_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="listBulletLast_inner" style="width: 14.4pt; white-space: nowrap;">•	</div>
                  </td>
                  <td width="100%">
                    <div class="listBulletLast_inner"><a name="228649">Why was the pattern broken?</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="body"><a name="228650">The answer often points to a potential application problem.</a></div>
          </td>
          <td style="border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top; width: 191.83824pt">
            <div class="figAnchor"><a name="228655"><img class="Default" src="images/atx_troubleshoot_with_patterns.25.1.1.jpg" width="256" height="177" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="body"><span class="bold"><a name="228671">Important—</a></span>Don’t get carried away. Not all problems manifest themselves as patterns. And, not all patterns indicate a problem. But, if you see a pattern, investigate it.</div>
      <div class="bodyIntro"><a name="226913">Review the following sample patterns identified by AppTransaction&nbsp;Xpert users:</a></div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="listBullet_inner" style="width: 14.4pt; white-space: nowrap;">•	</div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'atx_troubleshoot_with_patterns.html#227140', '');" title="Troubleshooting with Patterns" name="228464">Pattern #1: Server Delays</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="listBullet_inner" style="width: 14.4pt; white-space: nowrap;">•	</div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'atx_troubleshoot_with_patterns.html#222976', '');" title="Troubleshooting with Patterns" name="228472">Pattern #2: Network Delays</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="listBullet_inner" style="width: 14.4pt; white-space: nowrap;">•	</div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'atx_troubleshoot_with_patterns.html#222977', '');" title="Troubleshooting with Patterns" name="228475">Pattern #3: Small TCP Connections</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletLast_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="listBulletLast_inner" style="width: 14.4pt; white-space: nowrap;">•	</div>
            </td>
            <td width="100%">
              <div class="listBulletLast_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'atx_troubleshoot_with_patterns.html#222978', '');" title="Troubleshooting with Patterns" name="228480">Pattern #4: TCP “In-Flight” Data</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="h1NoBreak"><a name="227140">Pattern #1: Server Delays</a></div>
      <div class="bodyIntro"><span class="bold"><a name="227141">Issue:<br /></a></span>In the following Data Exchange Chart, notice the pattern of “application delay” at the server. Each delay is approximately 1.5&nbsp;seconds.</div>
      <div class="figAnchor"><a name="223330"><img class="Default" src="images/atx_troubleshoot_with_patterns.25.1.2.jpg" width="512" height="291" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="223332">&nbsp;</a></div>
      <div class="body"><span class="bold"><a name="223374">Solution:<br /></a></span>An application timer turned out to be the primary source of delay. A timer was set to poll a request buffer 2,400 times per hour; requests could only be serviced every 1.5&nbsp;seconds.</div>
      <div class="h1TopNoBreak"><a name="222976">Pattern #2: Network Delays</a></div>
      <div class="bodyIntro"><span class="bold"><a name="225071">Issue:<br /></a></span>In the following Data Exchange Chart, notice the pattern of “network delay” at the database. Each delay is about 200&nbsp;ms.</div>
      <div class="figAnchor"><a name="225075"><img class="Default" src="images/atx_troubleshoot_with_patterns.25.1.3.jpg" width="509" height="222" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="225076">&nbsp;</a></div>
      <div class="body"><span class="bold"><a name="223972">Cause:<br /></a></span>A clue here is that 200&nbsp;ms is a common value for the TCP Delayed ACK timer. Notice the small messages surrounding the delays. This delay is caused by the interaction between Nagle’s Algorithm and TCP delayed ACK.</div>
      <div class="h1NoBreak"><a name="222977">Pattern #3: Small TCP Connections</a></div>
      <div class="bodyIntro"><span class="bold"><a name="224005">Issue:<br /></a></span>The following Tree View shows an application that is very slow on the WAN. Notice the small TCP connections.</div>
      <div class="figAnchor"><a name="224008"><img class="Default" src="images/atx_troubleshoot_with_patterns.25.1.4.jpg" width="528" height="268" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="224009">&nbsp;</a></div>
      <div class="body"><span class="bold"><a name="224010">Cause:<br /></a></span>This is the result of a bad application design. There are 306&nbsp;TCP connections, most with only two data packets. This inefficient use of TCP connections adds hundreds of extra application turns.</div>
      <div class="h1NoBreak"><a name="222978">Pattern #4: TCP “In-Flight” Data</a></div>
      <div class="bodyIntro"><span class="bold"><a name="224037">Issue:<br /></a></span>In the following Statistic Graph, note that the “In-Flight” data seems to plateau at 8k.</div>
      <div class="figAnchor"><a name="224040"><img class="Default" src="images/atx_troubleshoot_with_patterns.25.1.5.jpg" width="509" height="230" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="224041">&nbsp;</a></div>
      <div class="body"><span class="bold"><a name="224042">Cause:<br /></a></span>This is a classic TCP window problem. One of the TCP windows is set to 8k, limiting throughput.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
    <div style="font-size: 8pt; font-family: arial; text-align: left; text-decoration: none;">
      <a href="../wwhelp/wwhimpl/common/html/default.htm">Home</a> | <a href="#" title="To the top of this page">Back to Top</a><br /><br />© 2013 Riverbed Technology.
  All Rights Reserved. This software may be covered by one or more U.S. Patents. See complete patent notice in the <a href="../Notices/aceanalyst_copy_info_wwp.html">Legal Notices</a> section.<br /><a href="http://www.riverbed.com/support/" style="text-decoration: none" target="_blank"> Riverbed Support Center </a><br /></div>
  </body>
</html>