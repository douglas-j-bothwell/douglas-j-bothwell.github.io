<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Capturing Application Traffic with tcpdump</title>
    <link rel="StyleSheet" href="css/ace_wan_acceleration_capturing_manual_tcpdump.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        function  WWHPDFLink()
        {
          return "ace_wan_acceleration_capturing_manual_tcpdump.pdf";
        }
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body style="margin-left: 2%; margin-right: 2%" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <div style="font-family: arial; float: right; height: 1px;"><a><img src="images/blank.gif" height="0" width="0" border="0" alt="skip to main content" /></a></div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">User Guide &gt; <a class="WebWorks_Breadcrumb_Link" href="atx_appendices_splash.html#898312">Appendices</a> &gt; Capturing Application Traffic with tcpdump</div>
    <hr align="left" />
    <blockquote>
      <div class="hAppendix"><a name="898312">Capturing Application Traffic with tcpdump</a></div>
      <div class="bodyIntro"><a name="979279">tcpdump is a command-line utility for capturing traffic. It generates packet&nbsp;traces in a format that AppTransaction&nbsp;Xpert can recognize. The syntax for starting a capture is as follows:</a></div>
      <div class="codeColumn"><span class="code"><a name="979283">cmd&gt; </a></span><span class="codebold">tcpdump -s 0 -i</span> <span class="italic">&lt;interface_name&gt;</span> <span class="codebold">-w &lt;</span><span class="italic">capture_file_name</span><span class="codebold" style="color: #000000; font-style: normal">&gt;</span> <span class="codebold">&lt;</span><span class="italic">expression</span><span class="codebold" style="color: #000000; font-style: normal">&gt;</span> </div>
      <div class="bodyIntro"><a name="979287">The following table lists a short description of each required argument. For more information about these and other arguments, refer to the “man” page for tcpdump. (To access this, go to an internet search engine and search on “tcpdump man”.)</a></div>
      <div class="tblAnchor"><a name="979354">&nbsp;</a></div>
      <table class="tableNarrow" style="text-align: left" cellspacing="0" summary="">
        <caption>
          <div class="tblCaption_outer" style="margin-left: 0pt">
            <table border="0" cellspacing="0" cellpadding="0" summary="">
              <tr style="vertical-align: baseline;">
                <td>
                  <div class="tblCaption_inner" style="width: 61.2pt; white-space: nowrap;">Table&nbsp;H-1   </div>
                </td>
                <td width="100%">
                  <div class="tblCaption_inner"><a name="979294">Command-Line Arguments to Use with tcpdump&nbsp;</a></div>
                </td>
              </tr>
            </table>
          </div>
        </caption>
        <tr>
          <td style="background-color: Gainsboro; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: bottom; width: 160.92072pt">
            <div class="tblHead"><a name="979298">Argument</a></div>
          </td>
          <td style="background-color: Gainsboro; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: bottom; width: 342.78984pt">
            <div class="tblHead"><a name="979300">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="tblBody9" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><a name="979302">–c</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="tblBody9"><a name="979304">Stop the capture after </a><span style="font-weight: bold">c </span>packets are captured.</div>
            <div class="tblBody9"><a name="979305">It is good practice to specify a maximum number of packets before the capture ends, to avoid the possibility that the accelerator will run out of disk space. </a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="tblBody9" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="codebold"><a name="979307">-s 0</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="tblBody9"><a name="979309">The maximum number of bytes to capture per individual packet. It is good practice to capture the smallest number of bytes per packet for the protocol information that you want to study in AppTransaction&nbsp;Xpert.</a></div>
            <div class="tblBody9"><a name="979313">To capture the entire contents of each packet, specify 0 for this argument.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="tblBody9" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="codebold"><a name="979315">–i &lt;</a></span><span class="italic">interface_name</span><span class="codebold" style="color: #000000; font-style: normal">&gt;</span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="tblBody9"><a name="979317">The name of the interface(s) on which to capture. </a></div>
            <div class="tblBody9"><a name="979318">If this is unspecified, tcpdump searches the system interface list for the lowest numbered, configured up interface (excluding loopback). Ties are broken by choosing the earliest match.</a></div>
            <div class="tblBody9"><a name="979319">To print a list of all available network interfaces on which tcpdump can capture packets, enter the following command:</a></div>
            <div class="tblBody9"><span class="code"><a name="979320">tcpdump –D</a></span> </div>
            <div class="tblBody9"><a name="979321">If you do not know which interface(s) to capture on, see the following:</a></div>
            <div class="tblBody9Bullet_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="tblBody9Bullet_inner" style="width: 7.2pt; white-space: nowrap;">•	</div>
                  </td>
                  <td width="100%">
                    <div class="tblBody9Bullet_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'ace_wan_acceleration_capturing_manual_cisco.html#979131', '');" title="Direct Captures on Cisco WAE Accelerators" name="979325">Identifying the WAE Interfaces for Capturing Traffic</a></span> (Cisco)</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="tblBody9Bullet_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="tblBody9Bullet_inner" style="width: 7.2pt; white-space: nowrap;">•	</div>
                  </td>
                  <td width="100%">
                    <div class="tblBody9Bullet_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'ace_wan_acceleration_capturing_manual_riverbed.html#979291', '');" title="Direct Captures on Riverbed Accelerators" name="979373">Identifying the Steelhead Interfaces for Capturing Traffic</a></span> (Riverbed)</div>
                  </td>
                </tr>
              </table>
            </div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="tblBody8Right"><span class="codebold"><a name="979335">–w &lt;</a></span><span class="italic">capture_file_name</span><span class="codebold" style="color: #000000; font-style: normal">&gt;</span> </div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="tblBody9"><a name="979337">Write the raw packets to &lt;</a><span class="italic">capture_file_name</span>&gt; rather than simply printing them out.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="tblBody9"><span class="codebold" style="font-style: normal"><a name="979339">&lt;</a></span><span class="italic">packet_filter_expression</span><span class="codebold" style="color: #000000; font-style: normal">&gt;</span> </div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.25pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.25pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.25pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="tblBody9"><a name="979341">A filter expression in Berkeley Packet Filter (BPF) format, used to filter out irrelevant packets.</a></div>
            <div class="tblBody9"><span class="bold"><a name="979342">Note—</a></span>You should always specify a packet filter. This will keep the packet&nbsp;trace from becoming unnecessarily large and reduce the amount of filtering required when you import the packet&nbsp;trace into AppTransaction&nbsp;Xpert.</div>
            <div class="tblBody9"><a name="979346">The following filters are provided as examples:</a></div>
            <div class="tblBody9Bullet_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="tblBody9Bullet_inner" style="width: 7.2pt; white-space: nowrap;">•	</div>
                  </td>
                  <td width="100%">
                    <div class="tblBody9Bullet_inner"><span class="code"><a name="979347">ip host client and ip host server<br /></a></span>(capture all IP packets between client and server)</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="tblBody9Bullet_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="tblBody9Bullet_inner" style="width: 7.2pt; white-space: nowrap;">•	</div>
                  </td>
                  <td width="100%">
                    <div class="tblBody9Bullet_inner"><span class="code"><a name="979348">ip host client.mycompany.com port eth1</a></span> <br />(capture all IP packets to or from port GigabitEthernet 2/0 (specified as <span class="code">eth1</span>) on host client)</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="tblBody9"><a name="979349">For detailed information about BPF, go to the “&lt;expression&gt;” section on the tcpdump man page. </a></div>
          </td>
        </tr>
      </table>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
    <div style="font-size: 8pt; font-family: arial; text-align: left; text-decoration: none;">
      <a href="../wwhelp/wwhimpl/common/html/default.htm">Home</a> | <a href="#" title="To the top of this page">Back to Top</a><br /><br />© 2013 Riverbed Technology.
  All Rights Reserved. This software may be covered by one or more U.S. Patents. See complete patent notice in the <a href="../Notices/aceanalyst_copy_info_wwp.html">Legal Notices</a> section.<br /><a href="http://www.riverbed.com/support/" style="text-decoration: none" target="_blank"> Riverbed Support Center </a><br /></div>
  </body>
</html>