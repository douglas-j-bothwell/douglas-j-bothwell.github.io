<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Transaction&nbsp;Whiteboard: Modeling an Application with Logic Scripts (Advanced)</title>
    <link rel="StyleSheet" href="css/ace_tut_wb_mod_app.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        function  WWHPDFLink()
        {
          return "ace_tut_wb_mod_app.pdf";
        }
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body style="margin-left: 2%; margin-right: 2%" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <div style="font-family: arial; float: right; height: 1px;"><a><img src="images/blank.gif" height="0" width="0" border="0" alt="skip to main content" /></a></div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">Tutorials and Examples &gt; <a class="WebWorks_Breadcrumb_Link" href="atx_tut_whiteboard_splash.html#1081596">Transaction Whiteboard Tutorials</a> &gt; Transaction&nbsp;Whiteboard: Modeling an Application with Logic Scripts (Advanced)</div>
    <hr align="left" />
    <blockquote>
      <div class="hChapterNoNum"><a name="1081596">Transaction&nbsp;Whiteboard: Modeling an Application with Logic Scripts (Advanced)</a></div>
      <div class="body"><a name="1088490">When database applications execute a query, each row that is fetched costs a round trip to the database. Therefore, many database applications employ a </a><span class="italic">prefetch</span> value to reduce round-trip times to the server; the prefetch value specifies the number of rows to be fetched from the result set in each trip to the database. The actual prefetch count varies and is configurable. For example, some Oracle interfaces default to 1, while Oracle’s JDBC defaults to 10.</div>
      <div class="body"><a name="1081599">In this tutorial, you will use the Transaction&nbsp;Whiteboard Scripting API to model a chatty database application and analyze how changes to the prefetch value impact the expected response time. When deployed, the application server and database will be separated by a MAN (Metro Area Network) with 10&nbsp;Mbps bandwidth and 1&nbsp;ms of latency; the client will be accessing the application server via a T1 link.</a></div>
      <div class="body"><a name="1086606">The objective of this tutorial is to show how to use the Transaction&nbsp;Whiteboard Scripting API to model application performance using different prefetch values.</a></div>
      <div class="h1TopNoBreak"><a name="1081602">Examine the Request/Response Pattern when the Prefetch Value is 2</a></div>
      <div class="bodyIntro"><a name="1081778">In the figure, notice that more than 5000 application messages are sent between App&nbsp;Server and DB&nbsp;Server.</a></div>
      <div class="figAnchor"><a name="1081779"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.01.jpg" width="399" height="339" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1086713">&nbsp;</a></div>
      <div class="bodyIntro"><a name="1086766">In this zoomed-in view, you can see that the traffic between App&nbsp;Server and DB&nbsp;Server consists of a regular request/response pattern</a>.</div>
      <div class="figAnchor"><a name="1082186"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.02.jpg" width="399" height="198" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1082188">&nbsp;</a></div>
      <div class="h1TopNoBreak"><a name="1086718">Model the SQL Logic in Transaction&nbsp;Whiteboard</a></div>
      <div class="bodyIntro"><a name="1081614">You will now use Transaction&nbsp;Whiteboard to model the series of request and response messages sent by this chatty database application. For this tutorial, assume that the application exhibits the following behavior:</a></div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="listBullet_inner" style="width: 14.4pt; white-space: nowrap;">•	</div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1081615">Each request to the database is a fixed size (95&nbsp;bytes).</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="listBullet_inner" style="width: 14.4pt; white-space: nowrap;">•	</div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1081616">Each response from the database is 53&nbsp;bytes of application overhead, plus 55&nbsp;bytes per row.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="listBullet_inner" style="width: 14.4pt; white-space: nowrap;">•	</div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1081617">The database takes a fixed amount of time (0.0018&nbsp;seconds) to process each request and send the response.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletLast_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="listBulletLast_inner" style="width: 14.4pt; white-space: nowrap;">•	</div>
            </td>
            <td width="100%">
              <div class="listBulletLast_inner"><a name="1081618">The application server takes a fixed amount of time (0.00015&nbsp;seconds) to generate each request.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="body"><a name="1081619">The following procedure describes how to model the request and response messages.</a></div>
      <div class="procCaption_outer" style="margin-left: 0pt" onclick="WebWorks_ToggleDIV(WebWorksRootPath, &quot;wwdd1086847&quot;);">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procCaption_inner" style="width: 99.2pt; white-space: nowrap;">
                <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteArrow(WebWorksRootPath, "wwdd1086847", false);</script>Procedure&nbsp;13-1   </div>
            </td>
            <td width="100%">
              <div class="procCaption_inner"><a name="1086847">Modeling the SQL Logic</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteDIVOpen("wwdd1086847", false);</script>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	1	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081620">Choose</a><span class="bold"> File&nbsp;&gt; Open&nbsp;Model&nbsp;&gt; Transaction&nbsp;Whiteboard…</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	2	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1088217">In the</a><span class="ftUserInput" style="font-weight: bold"> </span><span class="bold">Transaction&nbsp;Whiteboard Startup Wizard</span>, select <span class="bold">Open&nbsp;Existing&nbsp;Transaction&nbsp;Whiteboard&nbsp;file </span>and click <span class="bold">Next&nbsp;&gt;</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	3	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081622">Select the file </a><span class="bold">tutorial_sql_backend</span> in &lt;<span class="italic">reldir</span>&gt;\sys\examples\AppTransaction&nbsp;Xpert\examples and click <span class="ftUserInput" style="font-weight: bold">Open</span>; the file opens in <span style="font-size: 11.0pt">Transaction&nbsp;</span>Whiteboard.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepCont"><span class="bold"><a name="1084004">Note—</a></span><span class="boldItalic">&lt;reldir&gt;</span> is the release directory where AppTransaction&nbsp;Xpert is installed. (In the Windows environment this is typically C:\Program&nbsp;Files\OPNET\&lt;<span class="ftItalics" style="font-style: normal">release&nbsp;number</span>&gt;.)</div>
      <div class="procStepCont"><a name="1081837">In the </a><span class="bold">Data Exchange Chart</span>, notice that this file contains two tiers and no messages, as shown in the following figure.</div>
      <div class="figAnchor"><a name="1081840"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.03.jpg" width="389" height="118" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1081865">&nbsp;</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	4	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1086960">Choose </a><span class="bold">Scripting&nbsp;&gt; Declare Parameters…</span> Notice that there are two declared parameters. The first parameter, num_rows, specifies the total number of rows requested. The second parameter, prefetch_count, determines how many rows the database sends back for each request. Click <span class="bold">Cancel</span> to close the Declare Parameters dialog box.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1081868"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.04.jpg" width="396" height="168" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1081883">&nbsp;</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	5	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1087057">Choose </a><span class="bold">Scripting&nbsp;&gt; Initialization&nbsp;Block</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepResult_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStepResult_inner" style="width: 10.799999999999997pt; white-space: nowrap;">
                <img src="resultsarrow.gif" alt="*" border="0" width="12" height="7" />
              </div>
            </td>
            <td width="100%">
              <div class="procStepResult_inner"><a name="1087094">The following Python code appears in an edit pad.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1081886"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.05.jpg" width="509" height="263" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1081639">&nbsp;</a></div>
      <div class="procStepCont"><a name="1087102">Notice that this code: <br />(a) accesses the values of two declared parameters, <br />(b) uses the values to determine the response size and the number of loops, and <br />(c) sends a request and a response message from within a “for” loop.</a></div>
      <div class="procStepCont"><a name="1081640">Also notice that when num_rows is set to 200 and prefetch_count is set to 1, the loop will be executed 200 times, creating a total of 400 messages.</a></div>
      <div class="procStepCont"><a name="1089620">Close the window using the “X” button in the upper-right corner.</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	6	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081644">Click the</a><span class="bold"> QuickPredict</span> tool button to open QuickPredict.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	7	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081645">Click the </a><span class="bold">Bandwidth</span><span style="font-weight: bold"> </span>field and change the value to <span class="bold">10&nbsp;Mbps</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	8	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081646">Click the </a><span class="bold">Latency</span><span style="font-weight: bold"> </span>field and change the value to <span class="bold">1&nbsp;ms</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	9	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081901">Click </a><span class="bold">Update Results</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepResult_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStepResult_inner" style="width: 10.799999999999997pt; white-space: nowrap;">
                <img src="resultsarrow.gif" alt="*" border="0" width="12" height="7" />
              </div>
            </td>
            <td width="100%">
              <div class="procStepResult_inner"><a name="1088307">The QuickPredict window should look like the following figure.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1081904"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.06.jpg" width="506" height="394" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1081652">&nbsp;</a></div>
      <div class="procStepCont"><a name="1087177">Notice that the latency delay reported by QuickPredict was 400&nbsp;ms. This is due to the fact that 400 messages are being sent, each of which incurs 1&nbsp;ms of latency.</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	10	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081653">Click </a><span class="bold">Close</span> to close QuickPredict.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	11	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081654">Choose </a><span class="bold">File&nbsp;&gt; Close</span><span style="font-weight: bold"> </span>to close the model.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procEnd_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procEnd_inner" style="width: 32.4pt; white-space: nowrap;">End of Procedure 13-1</div>
            </td>
            <td width="100%">
              <div class="procEnd_inner"><a name="1086861">&nbsp;</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteDIVClose();</script>
      <div class="procSpaceAfter"><a name="1086865">&nbsp;</a></div>
      <div class="body"><a name="1081655">In this section, you examined a Transaction&nbsp;Whiteboard model that modeled the request/response pattern of a database application using messages dynamically created in the Initialization Block. For this chatty database application, you saw that the number of rows requested divided by the prefetch count equaled the number of request/response patterns, where each request/response pattern consists of two messages. Since each subsequent message was in the opposite direction, you can tell that latency delay could potentially be a performance bottleneck. Now, you will include the chatty database behavior in a Transaction&nbsp;Whiteboard model of the entire three-tier database application.</a></div>
      <div class="h1TopNoBreak"><a name="1081656">Model the Application in Transaction&nbsp;Whiteboard</a></div>
      <div class="procCaption_outer" style="margin-left: 0pt" onclick="WebWorks_ToggleDIV(WebWorksRootPath, &quot;wwdd1087283&quot;);">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procCaption_inner" style="width: 99.2pt; white-space: nowrap;">
                <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteArrow(WebWorksRootPath, "wwdd1087283", false);</script>Procedure&nbsp;13-2   </div>
            </td>
            <td width="100%">
              <div class="procCaption_inner"><a name="1087283">Modeling the Application</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteDIVOpen("wwdd1087283", false);</script>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	1	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1088334">Choose</a><span class="bold"> File&nbsp;&gt; Open&nbsp;Model&nbsp;&gt; Transaction&nbsp;Whiteboard…</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	2	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1088335">In the</a><span class="ftUserInput" style="font-weight: bold"> </span><span class="bold">Transaction&nbsp;Whiteboard Startup Wizard</span>, select <span class="bold">Open&nbsp;existing&nbsp;Transaction&nbsp;Whiteboard&nbsp;file </span>and click <span class="bold">Next&nbsp;&gt;</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	3	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081659">Select the file </a><span class="bold">tutorial_sql_prefetch</span> in <span class="bold">&lt;</span><span class="boldItalic">reldir</span><span class="bold" style="color: #000000; font-style: normal">&gt;\sys\examples\AppTransaction&nbsp;Xpert\examples</span>, then click <span class="bold">Open</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepResult_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStepResult_inner" style="width: 10.799999999999997pt; white-space: nowrap;">
                <img src="resultsarrow.gif" alt="*" border="0" width="12" height="7" />
              </div>
            </td>
            <td width="100%">
              <div class="procStepResult_inner"><a name="1085181">The file opens in Transaction&nbsp;Whiteboard.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	4	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081660">Choose </a><span class="bold">File &gt; Save&nbsp;As…</span>, then save the file as <span class="bold">&lt;</span><span class="boldItalic">initials</span><span class="bold" style="color: #000000; font-style: normal">&gt;_tutorial_sql_prefetch</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepCont"><a name="1082881">Notice that this three-tier Transaction&nbsp;Whiteboard model contains a logic script; you are going to use that logic script to invoke or </a><span class="ftItalics" style="font-style: normal">chain in</span> the database request file that you just examined. In other words, the application behavior in the file that we just examined will now be dynamically added to this file.</div>
      <div class="figAnchor"><a name="1082885"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.07.jpg" width="502" height="229" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1082886">&nbsp;</a></div>
      <div class="procStepCont"><a name="1087390">To invoke a Transaction&nbsp;Whiteboard file from a logic script, you must declare the child task.</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	5	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081938">Choose </a><span class="bold">Scripting&nbsp;&gt; Manage&nbsp;Child&nbsp;Tasks</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepResult_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStepResult_inner" style="width: 10.799999999999997pt; white-space: nowrap;">
                <img src="resultsarrow.gif" alt="*" border="0" width="12" height="7" />
              </div>
            </td>
            <td width="100%">
              <div class="procStepResult_inner"><a name="1087413">The Manage Child Tasks dialog box appears.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1081941"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.08.jpg" width="375" height="140" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1081672">&nbsp;</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	6	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1087420">In the Manage Child Tasks dialog box, click </a><span class="bold">Declare&nbsp;Child&nbsp;Tasks…</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepResult_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStepResult_inner" style="width: 10.799999999999997pt; white-space: nowrap;">
                <img src="resultsarrow.gif" alt="*" border="0" width="12" height="7" />
              </div>
            </td>
            <td width="100%">
              <div class="procStepResult_inner"><a name="1087478">The </a><span class="bold">Declare&nbsp;Child&nbsp;</span>AppTransaction&nbsp;Xpert<span class="bold">&nbsp;Tasks</span> dialog box appears.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	7	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1087482">Since you are declaring a Transaction&nbsp;Whiteboard file, click </a><span class="bold">Continue…</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepResult_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStepResult_inner" style="width: 10.799999999999997pt; white-space: nowrap;">
                <img src="resultsarrow.gif" alt="*" border="0" width="12" height="7" />
              </div>
            </td>
            <td width="100%">
              <div class="procStepResult_inner"><a name="1087483">The </a><span class="bold">Declare&nbsp;Child&nbsp;Transaction&nbsp;Whiteboard&nbsp;Tasks</span> dialog box appears.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	8	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081674">Select the file </a><span class="bold">tutorial_sql_backend</span> under &lt;<span class="italic">reldir</span>&gt;\sys\examples\AppTransaction&nbsp;Xpert\examples, and then click <span class="bold">OK</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepCont"><a name="1081953">Notice that the file</a><span class="bold"> tutorial_sql_backend.aed.m</span> is listed in the<span class="bold"> Manage&nbsp;Child&nbsp;Tasks</span> dialog box.</div>
      <div class="figAnchor"><a name="1081956"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.09.jpg" width="374" height="158" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1081680">&nbsp;</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	9	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1087533">In addition to declaring the child task, you can use this dialog box to specify how each tier name in the child task relates to the corresponding tier in the current task. In this example, the tier names in the child task already correspond directly to tier names in the current task.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	10	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081681">Click </a><span class="bold">OK</span> to close the dialog box.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepCont"><a name="1081682">You will now chain in the child task in the logic script.</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	11	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1082423">In the </a><span class="bold">Data Exchange Chart</span>, double-click on the <span class="bold">Logic&nbsp;Script</span> icon. <img class="Default" src="images/ace_tut_wb_mod_app.17.1.10.jpg" width="18" height="20" style="display: inline; float: none; left: 0.0; top: 0.0" title="" /></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	12	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1082462">Add the following code to the logic script. The first line creates a Python dictionary that contains two entries. The second line invokes the task tutorial_sq1_backend.aed.m. The script invokes this task with num_rows set to 2000 and prefetch_count set to 2.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="codeStep"><a name="1083228">#Signature: def &lt;funcname&gt; (self, action):<br /><br />child_parameters = {'num_rows':2000, 'prefetch_count':2}<br />self.invoke_child_task (action,<br />&nbsp;&nbsp;&nbsp;&nbsp;'tutorial_sql_backend.aed.m', True, child_parameters)<br /></a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	13	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081697">Choose </a><span class="bold">File&nbsp;&gt; Commit</span><span style="font-weight: bold"> </span>to save the logic script.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	14	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081698">From the Transaction&nbsp;Whiteboard window, choose </a><span class="bold">File&nbsp;&gt; Save</span><span style="font-weight: bold"> </span>to save the file.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procEnd_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procEnd_inner" style="width: 32.4pt; white-space: nowrap;">End of Procedure 13-2</div>
            </td>
            <td width="100%">
              <div class="procEnd_inner"><a name="1087309">&nbsp;</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteDIVClose();</script>
      <div class="procSpaceAfter"><a name="1087315">&nbsp;</a></div>
      <div class="body"><a name="1081699">In this Transaction&nbsp;Whiteboard file, you declared a child task, and then chained in the child task as part of a logic script. Notice that you were able to pass values for each of the declared parameters to the child task.</a></div>
      <div class="h1TopNoBreak"><a name="1081700">Use QuickPredict to Determine the Expected Response Time</a></div>
      <div class="procCaption_outer" style="margin-left: 0pt" onclick="WebWorks_ToggleDIV(WebWorksRootPath, &quot;wwdd1087667&quot;);">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procCaption_inner" style="width: 99.2pt; white-space: nowrap;">
                <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteArrow(WebWorksRootPath, "wwdd1087667", false);</script>Procedure&nbsp;13-3   </div>
            </td>
            <td width="100%">
              <div class="procCaption_inner"><a name="1087667">Determining the Expected Response Time (with QuickPredict)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteDIVOpen("wwdd1087667", false);</script>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	1	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081701">Click the </a><span class="bold">QuickPredict</span> tool button to open QuickPredict.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	2	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081702">Set the </a><span class="bold">Bandwidth</span><span style="font-weight: bold"> </span>for the first tier pair, client&lt;–&gt;app_server, is <span class="bold">1.544&nbsp;Mbps</span>. Set the <span class="bold">Latency</span><span style="font-weight: bold"> </span>for the first tier pair to <span class="bold">10&nbsp;ms</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	3	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081703">Change the </a><span class="bold">Bandwidth</span><span style="font-weight: bold"> </span>for the second tier pair, app_server&lt;–&gt;db_server, to <span class="bold">10&nbsp;Mbps</span><span style="font-weight: bold"> </span>and the <span class="bold">Latency</span><span style="font-weight: bold"> </span>to <span class="bold">1&nbsp;ms</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	4	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1088452">Click </a><span class="bold">Update&nbsp;Results</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepResult_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStepResult_inner" style="width: 10.799999999999997pt; white-space: nowrap;">
                <img src="resultsarrow.gif" alt="*" border="0" width="12" height="7" />
              </div>
            </td>
            <td width="100%">
              <div class="procStepResult_inner"><a name="1088453">The QuickPredict window should look like the following figure.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1082560"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.11.jpg" width="509" height="393" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1082562">&nbsp;</a></div>
      <div class="procStepCont"><a name="1087787">By examining the QuickPredict results, you can see that this application takes over 4&nbsp;seconds to retrieve 2000 rows from the database.</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	5	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1081710">Leave the QuickPredict window open.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepCont"><a name="1081711">You will now increase the prefetch count from 2 to 50.</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	6	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1085072">In the </a><span class="bold">Data Exchange Chart</span>, double-click on the <span class="ftUserInput" style="font-weight: bold">Logic&nbsp;Script</span> icon. <img class="Default" src="images/ace_tut_wb_mod_app.17.1.12.jpg" width="18" height="20" style="display: inline; float: none; left: 0.0; top: 0.0" title="" /></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	7	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1085076">Change the </a><span class="bold">prefetch_count</span> from 2 to <span class="bold">50</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1081995"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.13.jpg" width="507" height="153" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1081718">&nbsp;</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	8	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1087842">Choose </a><span class="bold">File&nbsp;&gt; Commit</span> to save the logic script.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap;">
                <span class="bold">	9	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="1082011">In the QuickPredict dialog box, click </a><span class="bold">Update&nbsp;Results</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepResult_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procStepResult_inner" style="width: 10.799999999999997pt; white-space: nowrap;">
                <img src="resultsarrow.gif" alt="*" border="0" width="12" height="7" />
              </div>
            </td>
            <td width="100%">
              <div class="procStepResult_inner"><a name="1088469">The QuickPredict window should look like the following figure.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1082014"><img class="Default" src="images/ace_tut_wb_mod_app.17.1.14.jpg" width="509" height="393" style="display: block; float: none; left: 0.0; top: 0.0" title="" /></a></div>
      <div class="figSpaceAfter"><a name="1081724">&nbsp;</a></div>
      <div class="procEnd_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="procEnd_inner" style="width: 32.4pt; white-space: nowrap;">End of Procedure 13-3</div>
            </td>
            <td width="100%">
              <div class="procEnd_inner"><a name="1087871">&nbsp;</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteDIVClose();</script>
      <div class="procSpaceAfter"><a name="1087878">&nbsp;</a></div>
      <div class="body"><a name="1087671">By increasing the prefetch count from 2 to 50, there is a dramatic decrease in the response time of the application when requesting 2000 rows. Instead of making 1000 requests of 2 rows each, increasing the prefetch count to 50 resulted in only making 40 requests of 50 rows each.</a></div>
      <div class="h1TopNoBreak"><a name="1081725">Conclusion</a></div>
      <div class="body"><a name="1081726">In this tutorial, you used Transaction&nbsp;Whiteboard to model the effects of changing the prefetch count for a chatty database application. First, you created a Transaction&nbsp;Whiteboard model of the chatty database request/response pattern. Then, you invoked this task from within a second Transaction&nbsp;Whiteboard model. By changing the values of the parameters passed to the child task, you saw that increasing the prefetch value resulted in fewer request/response patterns, which reduced both the tier processing delay and the latency delay.</a></div>
      <div class="h2NoBreak"><a name="1081727">Additional Details</a></div>
      <div class="body"><a name="1081728">The back-end Transaction&nbsp;Whiteboard file used in this tutorial contained two tiers and no drawn messages. The application messages were created dynamically in the Initialization Block. Alternatively, you could have drawn the request/response pattern and used the </a><span class="code">goto_action</span> method from the Transaction&nbsp;Whiteboard Scripting APIs to create the same behavior.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
    <div style="font-size: 8pt; font-family: arial; text-align: left; text-decoration: none;">
      <a href="../wwhelp/wwhimpl/common/html/default.htm">Home</a> | <a href="#" title="To the top of this page">Back to Top</a><br /><br />© 2013 Riverbed Technology.
  All Rights Reserved. This software may be covered by one or more U.S. Patents. See complete patent notice in the <a href="../Notices/aceanalyst_copy_info_wwp.html">Legal Notices</a> section.<br /><a href="http://www.riverbed.com/support/" style="text-decoration: none" target="_blank"> Riverbed Support Center </a><br /></div>
  </body>
</html>