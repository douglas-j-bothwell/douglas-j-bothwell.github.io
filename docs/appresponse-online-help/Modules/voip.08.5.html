<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <title>How to Enable SIP/TLS Decryption</title>
    <link rel="StyleSheet" href="css/voip.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body style="margin-left: 2%; margin-right: 2%" onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="voip_splash.html"> VoIP Performance</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="voip.08.1.html">Configuring and Analyzing VoIP</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="voip.08.4.html">Supported VoIP Signaling Protocols</a> &gt; How to Enable SIP/TLS Decryption</div>
    <hr align="left" />
    <blockquote>
      <div class="h2"><a name="942518">How to Enable SIP/TLS Decryption</a></div>
      <div class="bodyIntro"><a name="942519">Module&nbsp;for&nbsp;VoIP&nbsp;Performance can decrypt VoIP traffic that uses Session Initiation Protocol (SIP) signaling. To enable this functionality, do the following:</a></div>
      <div class="procCaption" onclick="WebWorks_ToggleDIV(WebWorksRootPath, &quot;wwdd942520&quot;);">
        <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteArrow(WebWorksRootPath, "wwdd942520", false);</script>Procedure&nbsp;1    <a name="942520">SIP/TLS Decryption: Setup and Configuration</a></div>
      <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteDIVOpen("wwdd942520", false);</script>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap">
                <span class="bold">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="942521">Log in to the VoIP web UI (</a><span class="code">https://[</span><span class="italic">appliance_name</span><span class="code" style="font-style: normal">]:8443/voip</span>) and go to the Administration Tools &gt; <span class="HTBlue"><a href="javascript:WWHClickedPopup('modules', 'voip.08.8.html#931997', '');" title="Configuring the Module for VoIP Performance">Protocol Settings Page</a></span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap">
                <span class="bold">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="942522">Under </a><span class="HTBlue"><a href="javascript:WWHClickedPopup('modules', 'voip.08.8.html#932010', '');" title="Configuring the Module for VoIP Performance">Protocol Handling Settings</a></span> &gt; Encrypted SIP (Ports), enter the port(s) used to handle encrypted SIP traffic.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figCaptionStep_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="figCaptionStep_inner" style="width: 57.6pt; white-space: nowrap">Figure&nbsp;1    </div>
            </td>
            <td width="100%">
              <div class="figCaptionStep_inner"><a name="942523">“Encrypted SIP” Setting in the VoIP Web UI</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="942527"><img class="Default" src="images/voip.08.5.1.jpg" width="511" height="190" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="figSpaceAfter"><a name="942528">&nbsp;</a></div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap">
                <span class="bold">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="942529">Click Apply at the bottom of this page to save your settings.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap">
                <span class="bold">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="942530">Log in to the main web UI (</a><span class="code">https://[</span><span class="italic">appliance</span><span class="code" style="font-style: normal">]:8443</span>) and go to System &gt; Pages.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap">
                <span class="bold">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="942531">Under Page Analysis Configuration, do the following:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepSub_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procStepSub_inner" style="width: 21.6pt; white-space: nowrap">
                <span class="bold">	5.1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStepSub_inner"><a name="942532">Under Data Collection &gt; Enable Page Analysis, verify that the Port(s) field does not include ports that overlap with those you specified for Encrypted SIP.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepSubCont"><span class="bold"><a name="942533">Note—</a></span>It is good practice to include only the ports that handle HTTPS traffic under Enable Page Analysis. Do not include any ports that handle SIP traffic on this page. </div>
      <div class="procStepSubCont"><a name="942534">SIP traffic on a port will not get decrypted if Enable Page Analysis is enabled for that port (HTTPS traffic will take precedence and SIP traffic will get ignored). </a></div>
      <div class="procStepSub_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procStepSub_inner" style="width: 21.6pt; white-space: nowrap">
                <span class="bold">	5.2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStepSub_inner"><a name="942535">Under Page Analysis Configuration Parameters, verify that Enable SSL Decoding is enabled.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepSub_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procStepSub_inner" style="width: 21.6pt; white-space: nowrap">
                <span class="bold">	5.3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStepSub_inner"><a name="942536">Under Private Key Configuration, add the private keys needed to decrypt the SIP traffic, as described </a><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'wta_setup.078.6.html#1113654', '');" title="SSL Decoding: Enabling and Configuring">Specifying Private Keys</a></span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepSub_outer" style="margin-left: 21.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procStepSub_inner" style="width: 21.6pt; white-space: nowrap">
                <span class="bold">	5.4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStepSub_inner"><a name="942541">Click Apply (at the bottom of the page). </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStep_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procStep_inner" style="width: 21.6pt; white-space: nowrap">
                <span class="bold">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="procStep_inner"><a name="942542">Using an SSL client such as putty, log in to the appliance as a user with administrator privileges. Then enter the following from the command line:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="procStepCont"><span class="code"><a name="942543">setNgfestats PCE_FLOW_TIMEOUT=300</a></span> </div>
      <div class="procNote">
        <span class="bold">Note—</span><a name="942544">Although SIP/TLS decryption is now enabled, the appliance cannot decrypt traffic between a specific Lync client and server until it sees the initial handshake. Therefore, you will not see decrypted traffic for a Lync client until it logs out of the server and then logs back in. </a></div>
      <div class="procEnd_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="procEnd_inner" style="width: 32.4pt; white-space: nowrap">End of Procedure 1</div>
            </td>
            <td width="100%">
              <div class="procEnd_inner"><a name="942545">&nbsp;</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">WebWorks_WriteDIVClose();</script>
      <div class="procSpaceAfter"><a name="942546">&nbsp;</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
    <div style="font-size: 8pt; font-family: arial; text-align: left; text-decoration: none;">
      <a href="../wwhelp/wwhimpl/common/html/default.htm">Home</a> | <a href="#" title="To the top of this page">Back to Top</a><br /><br />© 2014 Riverbed Technology.
  All Rights Reserved. This software may be covered by one or more U.S. Patents. See complete patent notice in the <a href="../Notices/ace_live_copy_info_wwp.html">Legal Notices</a> section. <br /><a href="http://www.riverbed.com/support/" style="text-decoration: none" target="_blank"> Riverbed Support</a><br /></div>
  </body>
</html>