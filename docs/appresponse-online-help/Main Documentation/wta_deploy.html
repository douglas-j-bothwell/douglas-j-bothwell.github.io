<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <title>Deploying an Appliance for Web Transaction Analysis</title>
    <link rel="StyleSheet" href="css/wta_deploy.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body style="margin-left: 2%; margin-right: 2%" onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="_ace_live_user_guide_splash.html">User Guide</a> &gt; <a class="WebWorks_Breadcrumb_Link" href="wta.html">Web Transaction Analysis</a> &gt; Deploying an Appliance for Web Transaction Analysis</div>
    <hr align="left" />
    <blockquote>
      <div class="h1"><a name="1113433">Deploying an Appliance for Web Transaction Analysis</a></div>
      <div class="body"><a name="1113434">This section describes best practices and recommendations for deploying an AppResponse appliance to observe and analyze web transactions. The advice in this section applies to Web Transaction Analysis workflows only, and is not applicable to other AppResponse workflows (such as capacity planning, for example, or identifying bottlenecks such as bandwidth hogs or slow servers).</a></div>
      <div class="bodyIntro"><a name="1113441">Web Transaction Analysis is especially useful for analyzing web performance as experienced by end users: download times, slow pages, HTTP response codes, and so on. For example, you can use WTA to monitor and analyze the following scenarios:</a></div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113442">Internal web pages viewed by internal users (</a><span class="code" style="color: #0000ff">inet.mycompany.com</span>)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113443">Internal web pages viewed by external users (</a><span class="code" style="color: #0000ff">www.mycompany.com/shopping_cart</span>)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113444">External web pages viewed by internal users (</a><span class="code" style="color: #0000ff">www.google.com</span>, <span class="code" style="color: #0000ff">www.cnn.com</span>)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="bodyIntro"><a name="1113701">This section discusses the following:</a></div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'wta_deploy.html#1113446', '');" title="Deploying an Appliance for Web Transaction Analysis" name="1113740">Before You Begin: Questions You Need to Answer</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'wta_deploy.html#1113466', '');" title="Deploying an Appliance for Web Transaction Analysis" name="1113755">Key Concepts and Recommendations</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'wta_deploy.html#1113484', '');" title="Deploying an Appliance for Web Transaction Analysis" name="1113780">Proxy Servers</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'wta_deploy.html#1113511', '');" title="Deploying an Appliance for Web Transaction Analysis" name="1113757">Load Balancers</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'wta_deploy.html#1113537', '');" title="Deploying an Appliance for Web Transaction Analysis" name="1113743">Multiple Monitoring Interface Groups (MIFGs) and Web Transaction Analysis</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="h2NoBreak"><a name="1113446">Before You Begin: Questions You Need to Answer</a></div>
      <div class="body"><a name="1113447">Regardless of your network topology and web applications, a key question you need to ask is: </a><span class="italic">Where and how do I monitor web transactions so that </span>AppResponse<span class="italic"> observes the Originating IPs (and, ideally, Server IPs as well)?</span> </div>
      <div class="bodyIntro"><a name="1113451">To answer this question, you must ask and answer several other questions: </a></div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113452">Where are the clients for the transactions you want to analyze? </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113454">Are they on the internal corporate network? </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113455">Are they at a branch office connected by a dedicated line? </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113456">Are they spread out in multiple locations?</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113457">Do your Web Transaction Analysis studies require both the Originating IPs </a><span class="italic">and the Server IPs</span> for the transactions of interest?</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113458">Are the web clients (Originating IPs) and web servers (Server IPs) separated by intervening devices such as proxy servers or load balancers? </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113459">Do any of these devices change or hide IPs on either side of the device? </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113460">Can you configure these devices to enable </a><span class="code">X-Forwarded-for</span> (XFF) headers? </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletCont"><a name="1113461">The </a><span class="code">X-Forwarded-for</span> HTTP header is a common standard for identifying the originating IP of a client that connects to a web server through an intervening HTTP proxy or load balancer. If a proxy or load balancer changes or hides IPs, AppResponse can use XFF headers to determine the Originating IP. Not all proxy/load-balancer models support XFF, and not all IS organizations allow this option to be enabled. </div>
      <div class="h2NoBreak"><a name="1113466">Key Concepts and Recommendations</a></div>
      <div class="bodyIntro"><a name="1113467">Always keep in mind the following:</a></div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113471">For AppResponse</a><span class="italic"> </span>to analyze a web transaction, the appliance must observe the originating IP (either in the HTTP request header or in an XFF field)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113472">If you want to observe both originating and server IPs, you must have XFF</a><span class="code"> </span>enabled on any intervening device. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="bodyIntro"><a name="1113476">Riverbed advises the following: </a></div>
      <div class="listNum_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listNum_inner" style="width: 16.128pt; white-space: nowrap">	1)	</div>
            </td>
            <td width="100%">
              <div class="listNum_inner"><a name="1113480">If possible, monitor web traffic in a location where AppResponse can observe the Originating and Server IPs directly. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listNum_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listNum_inner" style="width: 16.128pt; white-space: nowrap">	2)	</div>
            </td>
            <td width="100%">
              <div class="listNum_inner"><a name="1113481">If this is not possible, configure all intervening devices to include XFF headers. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listNum_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listNum_inner" style="width: 16.128pt; white-space: nowrap">	3)	</div>
            </td>
            <td width="100%">
              <div class="listNum_inner"><a name="1113482">If neither option is possible—that is, if there is no network location where the appliance can monitor both Originating IPs (either directly or via XFF) and Server IPs—set up the appliance to monitor the </a><span class="italic">Originating IPs</span> for the web transactions of interest. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="h2TopNoBreak"><a name="1113484">Proxy Servers</a></div>
      <div class="bodyIntro"><a name="1113485">Many networks channel web traffic through a proxy server, which hides internal IPs from the outside world. If the appliance monitors web traffic on the wrong side of a proxy, and XFF data is not available, the proxy IP will appear as the Originating IP and Client IP for all web transactions. If you cannot enable XFF on your proxy, you should always monitor web traffic on the client side. </a></div>
      <div class="figCaptionPage_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="figCaptionPage_inner" style="width: 63.792pt; white-space: nowrap">
                <span class="bold">Figure&nbsp;1     </span>
              </div>
            </td>
            <td width="100%">
              <div class="figCaptionPage_inner"><a name="1113487">Proxy Server without X-Forwarded-for Headers</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1113491"><img class="Default" src="images/wta_deploy.077.1.1.jpg" width="672" height="211" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="figSpaceAfter"><a name="1113492">&nbsp;</a></div>
      <div class="bodyIntro"><a name="1113493">If the proxy can forward XFF headers, the Originating IPs are visible on both the client and (via XFF) the server sides. Note that on the server side, AppResponse can distinguish between the Originating IP (which initiates the HTTP request) and the Client IP (which initiates the direct TCP connection with the server). If this distinction is relevant to your studies, monitoring on the server side is preferable. </a></div>
      <div class="figCaptionPage_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="figCaptionPage_inner" style="width: 63.792pt; white-space: nowrap">
                <span class="bold">Figure&nbsp;2     </span>
              </div>
            </td>
            <td width="100%">
              <div class="figCaptionPage_inner"><a name="1113497">Proxy Server with XFF Headers</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1113501"><img class="Default" src="images/wta_deploy.077.1.2.jpg" width="672" height="199" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="figSpaceAfter"><a name="1113502">&nbsp;</a></div>
      <div class="bodyNote">
        <span class="bold">Note: </span><a name="1113503">If your appliance monitors HTTP requests from one or more proxy servers (as illustrated by the right-side appliance in the previous figure), it is good practice to add a wildcard to the start of the URL path in the application definition.For more information, see </a><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'UGCH-Apps.028.3.html#1206022', '');" title="Defined Application Manager">Adding URLs to Web Applications</a></span>.</div>
      <div class="h2NoBreak"><a name="1113511">Load Balancers</a></div>
      <div class="bodyIntro"><a name="1113512">If a load balancer separates your web clients and servers, the device might hide IPs on both sides: server IPs on the client side, and client IPs on the server side. If this is the case, and XFF header data is not available, you should capture on the client side to ensure that AppResponse observes the Originating IPs for the transactions of interest. </a></div>
      <div class="figCaptionPage_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="figCaptionPage_inner" style="width: 63.792pt; white-space: nowrap">
                <span class="bold">Figure&nbsp;3     </span>
              </div>
            </td>
            <td width="100%">
              <div class="figCaptionPage_inner"><a name="1113516">Load Balancer without XFF Headers</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1113520"><img class="Default" src="images/wta_deploy.077.1.3.jpg" width="672" height="212" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="figSpaceAfter"><a name="1113521">&nbsp;</a></div>
      <div class="body"><a name="1113525">Note that in contrast to the proxy example (</a><span class="HTBlue"><a href="javascript:WWHClickedPopup('main_doc', 'wta_deploy.html#1113487', '');" title="Deploying an Appliance for Web Transaction Analysis">Figure&nbsp;1</a></span>), Server IPs are not visible on the client side. This means that you cannot perform analyses that rely on Server IPs if these IPs are unknown. If a specific page could have come from several different servers, AppResponse cannot identify the server for that page.</div>
      <div class="bodyIntro"><a name="1113529">In the following diagram, XFF headers are visible on the server side (the Server IPs are still not visible on the client side). In this case, observing on the server side is preferable unless you are absolutely sure that Server IPs are irrelevant to your studies. </a></div>
      <div class="figCaptionPage_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="figCaptionPage_inner" style="width: 63.792pt; white-space: nowrap">
                <span class="bold">Figure&nbsp;4     </span>
              </div>
            </td>
            <td width="100%">
              <div class="figCaptionPage_inner"><a name="1113530">Load Balancer with XFF Headers on Server Side</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1113534"><img class="Default" src="images/wta_deploy.077.1.4.jpg" width="672" height="194" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="figSpaceAfter"><a name="1113535">&nbsp;</a></div>
      <div class="h2NoBreak"><a name="1113537">Multiple Monitoring Interface Groups (MIFGs) and Web Transaction Analysis</a></div>
      <div class="bodyIntro"><a name="1113538">If you want to enable Web Transaction Analysis and also collect data for Monitoring Interface Groups, note the following:</a></div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113542">For AppResponse to construct an individual page view accurately, a MIFG must observe the initial HTTP request and all HTTP responses for that page view. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113543">In the following configuration, the appliance observes web pages served to two different client sites. Each client site is behind a separate WAN link. For AppResponse to construct page views for these sites, you must configure each MIFG to monitor all web traffic between the server site and the corresponding client site.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="figAnchor"><a name="1113550"><img class="Default" src="images/wta_deploy.077.1.5.jpg" width="475" height="225" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="figSpaceAfter"><a name="1113551">&nbsp;</a></div>
      <div class="listBulletCont"><span class="bold" style="color: #000000; font-size: 10.0pt"><a name="1113556">NOTE—</a></span>AppResponse cannot construct a page view whose traffic is divided into multiple MIFGs. For example, AppResponse cannot construct a page view if the initial request is observed in one group and the responses are observed in a different group.</div>
      <div class="figAnchor"><a name="1113563"><img class="Default" src="images/wta_deploy.077.1.6.jpg" width="511" height="251" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="figSpaceAfter"><a name="1113564">&nbsp;</a></div>
      <div class="listBulletCont"><a name="1113568">Similarly, AppResponse cannot construct a page view that contains static and dynamically generated content from servers that are observed in separate MIFGs.</a></div>
      <div class="figAnchor"><a name="1113572"><img class="Default" src="images/wta_deploy.077.1.7.jpg" width="511" height="208" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="figSpaceAfter"><a name="1113573">&nbsp;</a></div>
      <div class="listBullet_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBullet_inner" style="width: 16.128pt; white-space: nowrap">
                <span style="color: #000000; font-family: Arial; font-size: 7.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">
                  <img src="HTML_Bullet.gif" alt="*" border="0" width="5" height="7" />
                </span>
              </div>
            </td>
            <td width="100%">
              <div class="listBullet_inner"><a name="1113574">If an appliance monitors traffic on both sides of a firewall, proxy or VPN, then you can configure MIFGs to eliminate potential double-counting of traffic. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletCont"><a name="1113575">Consider the following example: </a></div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113576">A remote client communicates with an internal server through a VPN.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113580">AppResponse observes a conversation between the VPN and the client; the client communicates with the VPN IP.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113584">AppResponse observes the same conversation between the VPN and the server; the client communicates with the server IP, which is different from the VPN IP. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113585">If both conversations use the same client IP, the traffic recorded for this client IP will be double-counted (</a><span class="code">client_ip&lt;--&gt;vpn_ip</span> and <span class="code">client_ip&lt;--&gt;server_ip</span>).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletCont"><a name="1113586">You can use MIFGs to eliminate this double-counting of traffic. In this case you would do the following: </a></div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113587">Configure one MIFG to monitor the traffic “behind” the firewall, proxy or VPN.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113588">Configure another MIFG to monitor the traffic “in front of” the straddled device.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletSub_outer" style="margin-left: 16.128pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="listBulletSub_inner" style="width: 16.128pt; white-space: nowrap">–	</div>
            </td>
            <td width="100%">
              <div class="listBulletSub_inner"><a name="1113589">Enable the “Limit reporting to the Monitoring Interface Table” option for </a><span class="italic">one</span> of these MIFGs. The traffic observed by this MIFG will not be combined with traffic observed by the other MIFG when reporting overall statistics (such as to the total traffic for an IP).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="listBulletCont"><a name="1113590">In the VPN example, you should enable this option for the MIFG that observes the traffic “in front of” the VPN (i.e. between the VPN and clients). With this configuration, the total traffic for a client IP represents the traffic observed between the internal servers “behind” the VPN and that client.</a></div>
      <div class="figAnchor"><a name="1113600"><img class="Default" src="images/wta_deploy.077.1.8.jpg" width="675" height="191" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="figSpaceAfter"><a name="1113601">&nbsp;</a></div>
      <div class="listBulletCont"><span class="bold"><a name="1113602">Note—</a></span>Before you select the MIFG that serves as your web data source (with the "Limit Reporting" option enabled for other MIFGs), Riverbed recommends that you understand the traffic characteristics of each network location. The best data sources are locations where the MIFG sees the original client and server IPs instead of proxy, VPN, or other IP equivalents. Locations that use some form of tunneling or encryption might not make good data sources if they encapsulate TCP and other protocol data. For these and other reasons, you must understand the effects of different locations on specific server and client IPs. This knowledge is critical to selecting the data source MIFG and interpreting the resulting web page data accurately.</div>
      <div class="body"><a name="1113603">If you cannot analyze your web pages in accordance with these guidelines, or have special requirements for analyzing web pages using multiple MIFGs, you can contact Riverbed Support. </a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
    <div style="font-size: 8pt; font-family: arial; text-align: left; text-decoration: none;">
      <a href="../wwhelp/wwhimpl/common/html/default.htm">Home</a> | <a href="#" title="To the top of this page">Back to Top</a><br /><br />© 2014 Riverbed Technology.
  All Rights Reserved. This software may be covered by one or more U.S. Patents. See complete patent notice in the <a href="../Notices/ace_live_copy_info_wwp.html">Legal Notices</a> section. <br /><a href="http://www.riverbed.com/support/" style="text-decoration: none" target="_blank"> Riverbed Support</a><br /></div>
  </body>
</html>